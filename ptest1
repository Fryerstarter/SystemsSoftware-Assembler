COPY	START	1000
FIRST	STL		RETADR
CLOOP	JSUB	RDREC
		LDA		LENGTH
		COMP	ZERO
		JEQ		ENDFIL
		JSUB	WRREC
		JEQ		CLOOP
ENDFIL	LDA		EOF
		STA		BUFFER
		LDA		THREE
		STA		LENGTH
		JSUB 	WRREC
		LDL		RETADR
		RSUB
EOF		WORD	1
THREE	WORD	3
ZERO	WORD	0
RETADR	RESW	1
LENGTH	RESW	1000
BUFFER	RESB	4096
RDREC	LDX		ZERO
		LDA		ZERO
RLOOP	TD		INPUT
		JEQ		RLOOP
		RD		INPUT
		COMP	ZERO
		JEQ		EXIT
		STCH	BUFFER,X
		TIX		MAXLEN
		JLT		RLOOP
EXIT	STX		LENGTH
		RSUB
INPUT 	RESB 	1
MAXLEN	WORD	4096
WRREC	LDX		ZERO
WLOOP	TD		OUTPUT
		JEQ		WLOOP
		LDCH	BUFFER,X
		WD		OUTPUT
		TIX		LENGTH
		JLT		WLOOP
		RSUB
OUTPUT	RESB	1
END	FIRST